<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ESPdefeator | Cross-Platform</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Share Tech Mono', monospace; }
        
        body {
            background-color: #0c0c0c;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow-x: hidden;
            position: relative;
        }

        #matrix-canvas {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            z-index: 0; pointer-events: none; opacity: 0.25;
        }

        /* GLITCH ANIMATION */
        @keyframes glitch {
            0% { transform: translate(0); }
            20% { transform: translate(-2px, 2px); }
            40% { transform: translate(-2px, -2px); }
            60% { transform: translate(2px, 2px); }
            80% { transform: translate(2px, -2px); }
            100% { transform: translate(0); }
        }
        .glitch-active { animation: glitch 0.2s infinite; filter: hue-rotate(90deg); }

        .edex-terminal {
            position: relative;
            z-index: 20;
            width: 95vw;
            max-width: 1400px;
            height: 90vh; /* PC Default */
            background: #0f120f;
            border: 2px solid #1fff8e;
            border-radius: 12px;
            box-shadow: 0 0 30px #1fff8e;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .status-bar {
            background: #0f1a0f;
            border-bottom: 2px solid #1fff8e;
            padding: 8px 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: #2eff9e;
            font-size: 0.8rem;
        }

        .fs-btn {
            background: #1fff8e; color: #000; border: none;
            padding: 2px 6px; border-radius: 4px; cursor: pointer; font-size: 0.7rem;
        }

        .edex-main { display: flex; flex: 1; padding: 6px; gap: 6px; min-height: 0; }

        .file-explorer {
            width: 280px;
            background: #0b140b;
            border: 1px solid #1fff8e;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
        }

        .tree-item {
            padding: 12px 12px 12px 30px; /* Larger for mobile touch */
            color: #9effb0;
            position: relative;
            cursor: pointer;
            text-decoration: none;
            display: block;
        }
        .tree-item:hover { background: #1a3a1a; }
        .tree-item::before { content: "üìÅ"; position: absolute; left: 8px; }
        .tree-item.file::before { content: "üìÑ"; }

        .center-area { flex: 1; display: flex; flex-direction: column; gap: 6px; min-width: 0; }
        
        .terminal-window {
            background: #0a100a;
            border: 1px solid #1fff8e;
            border-radius: 8px;
            flex: 2;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .terminal-content { flex: 1; padding: 15px; overflow-y: auto; color: #b0ffb0; font-size: 0.85rem; }
        .prompt { color: #9eff6e; font-weight: bold; }

        .widget-row { display: flex; gap: 6px; flex: 1.2; }
        .clock-panel {
            background: #0b140b;
            border: 1px solid #1fff8e;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            flex: 1;
        }
        .analog-clock { font-size: 2.5rem; color: #8affb0; text-shadow: 0 0 10px #1fff8e; }

        .social-links-panel {
            background: #0b140b; border: 1px solid #1fff8e; border-radius: 8px;
            padding: 10px; flex: 1.5; overflow-y: auto; scrollbar-width: thin;
        }

        /* MOBILE OVERRIDES */
        @media (max-width: 850px) {
            .edex-terminal { height: 98vh; }
            .edex-main { flex-direction: column; overflow-y: auto; }
            .file-explorer { width: 100%; max-height: 250px; }
            .widget-row { flex-direction: column; }
            .terminal-window { min-height: 300px; }
        }
    </style>
</head>
<body id="body-main">

    <canvas id="matrix-canvas"></canvas>

    <div class="edex-terminal" id="app-container">
        <div class="status-bar">
            <div><button class="fs-btn" onclick="toggleFS()">FULLSCREEN</button></div>
            <div id="currentPath">‚ö° /socials/</div>
            <div>UPTIME: <span id="uptime">0s</span></div>
        </div>

        <div class="edex-main">
            <div class="file-explorer">
                <div style="background:#1a2a1a; padding:8px; border-bottom:1px solid #1fff8e;">üìÅ ROOT</div>
                <div class="explorer-tree" id="fileTree"></div>
            </div>

            <div class="center-area">
                <div class="terminal-window">
                    <div class="terminal-content" id="termContent">
                        <div><span class="prompt">‚îå‚îÄ[user@esp]</span></div>
                        <div><span class="prompt">‚îî‚îÄ$</span> system_init.sh</div>
                        <div id="log-anchor"></div>
                    </div>
                </div>

                <div class="widget-row">
                    <div class="clock-panel">
                        <div class="analog-clock" id="clock">00:00:00</div>
                    </div>
                    <div class="social-links-panel">
                        <iframe style="border-radius:8px" src="http://googleusercontent.com/spotify.com/4" width="100%" height="80" frameBorder="0" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"></iframe>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // MATRIX
        const canvas = document.getElementById('matrix-canvas');
        const ctx = canvas.getContext('2d');
        let w, h, cols, drops;
        function initM() {
            w = canvas.width = window.innerWidth;
            h = canvas.height = window.innerHeight;
            cols = Math.floor(w / 20);
            drops = Array(cols).fill(0);
        }
        function drawM() {
            ctx.fillStyle = "rgba(0,0,0,0.05)"; ctx.fillRect(0,0,w,h);
            ctx.fillStyle = "#0F0"; ctx.font = "15px monospace";
            for(let i=0; i<drops.length; i++) {
                ctx.fillText(String.fromCharCode(0x30A0 + Math.random()*96), i*20, drops[i]*20);
                if(drops[i]*20 > h && Math.random() > 0.975) drops[i] = 0;
                drops[i]++;
            }
        }
        window.onresize = initM; initM(); setInterval(drawM, 50);

        // GLITCH EFFECT
        function triggerGlitch() {
            const el = document.getElementById('app-container');
            el.classList.add('glitch-active');
            setTimeout(() => el.classList.remove('glitch-active'), 300);
        }
        setInterval(() => { if(Math.random() > 0.95) triggerGlitch(); }, 3000);

        // FULLSCREEN
        function toggleFS() {
            if (!document.fullscreenElement) document.documentElement.requestFullscreen();
            else document.exitFullscreen();
        }

        // FS DATA
        const fs = [
            { name: 'tiktok.link', url: 'https://tiktok.com/@espdefeator' },
            { name: 'youtube.cfg', url: 'https://youtube.com/@espdefeator' },
            { name: 'github.dev', url: 'https://github.com/creeperrick' }
        ];

        const tree = document.getElementById('fileTree');
        fs.forEach(item => {
            const el = document.createElement('a');
            el.className = 'tree-item file';
            el.innerText = item.name;
            el.href = item.url;
            el.target = "_blank";
            el.onclick = () => addLog(`exec ${item.name}...`);
            tree.appendChild(el);
        });

        function addLog(msg) {
            const div = document.createElement('div');
            div.innerHTML = `<span class="prompt">>></span> ${msg}`;
            document.getElementById('termContent').insertBefore(div, document.getElementById('log-anchor'));
        }

        setInterval(() => {
            document.getElementById('clock').innerText = new Date().toLocaleTimeString('en-GB');
            document.getElementById('uptime').innerText = Math.floor(performance.now()/1000) + "s";
        }, 1000);
    </script>
</body>
</html>
